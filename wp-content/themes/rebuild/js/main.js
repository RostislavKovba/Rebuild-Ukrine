$(document).ready((function(){if($(".animated_title").length>0&&$(".animated_title p").html((function(e,t){return"<span>"+$.trim(t).split("").join("</span><span>")+"</span>"})),$(".scrolling-path").length>0){let e,t,n=2;Array.prototype.forEach.call($(".scrolling-path"),s=>{$(".front-page").length>0&&(n=7),console.log(s,"child"),e=s,t=s.getTotalLength(),s.style.strokeDasharray=t,s.style.strokeDashoffset=t,window.addEventListener("scroll",(function(){var e=(document.body.scrollTop+document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*n,o=t*e;s.style.strokeDashoffset=t-o}))})}if($(".btn").length>0){const e=document.querySelectorAll(".btn, .swiper-button-prev, .swiper-button-next, .social svg");e.forEach(e=>{e.addEventListener("mousemove",(function(t){let n,s;e.classList.contains("btn-secondary")||e.classList.contains("btn-primary")?(n=t.screenX-e.getBoundingClientRect().left-(e.getBoundingClientRect().width/2-50),s=t.y-e.getBoundingClientRect().top-15.5):(n=t.screenX-e.getBoundingClientRect().left-15.5,s=t.y-e.getBoundingClientRect().top-15.5),e.style.setProperty("transform",`translate(${n}px, ${s}px)`),(e.classList.contains("swiper-button-prev")||e.classList.contains("swiper-button-next"))&&(e.classList.add("scale"),e.style.setProperty("--left-x",n-5.5+"px"),e.style.setProperty("--top-y",s-5.5+"px"))}))}),e.forEach(e=>{e.addEventListener("mouseout",(function(t){e.style.transform="translate(0px, 0px)",(e.classList.contains("swiper-button-prev")||e.classList.contains("swiper-button-next"))&&(e.classList.remove("scale"),e.style.setProperty("--left-x",-1*e.getBoundingClientRect().width+"px"),e.style.setProperty("--top-y",-1*e.getBoundingClientRect().width+"px"))}))})}const e=document.querySelector(".cursor");document.addEventListener("mousemove",(function(t){const n=t.clientX,s=t.clientY;e.style.left=n+"px",e.style.top=s+"px"})),$(".swiper-slide").length>0&&document.querySelectorAll(".swiper-slide").forEach(t=>{t.addEventListener("mousemove",(function(t){e.style.display="none"})),t.addEventListener("mouseleave",(function(t){e.style.display="block"}))}),$(".rating").length>0&&document.querySelectorAll(".rating").forEach(e=>{const t=e.querySelector(".group"),n=t.querySelectorAll("span")[1].innerHTML.replace(/[^0-9]/g,""),s=t.querySelectorAll("span")[0].innerHTML.replace(/[^0-9]/g,"")/n*100;e.querySelector(".line span").style=`width: ${s}%`}),$.getScript("https://cdnjs.cloudflare.com/ajax/libs/smoothscroll/1.4.9/SmoothScroll.js",(function(){SmoothScroll({keyboardSupport:!0,animationTime:1e3,stepSize:60})})),$("input, textarea").length>0&&document.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("focus",e=>{e.target.closest("fieldset").classList.add("focused")}),e.addEventListener("blur",e=>{0===e.target.value.length&&e.target.closest("fieldset").classList.remove("focused")})}),$(".burger").on("click",(function(){$(this).toggleClass("opened"),$("header").toggleClass("opened")})),window.addEventListener("scroll",(function(e){if(document.querySelectorAll(".scroll-y").length>0){const e=document.querySelectorAll(".scroll-y");for(let t=0;t<e.length;t++)!e[t].classList.contains("enter")&&e[t].getBoundingClientRect().top-window.innerHeight<80&&e[t].getBoundingClientRect().bottom>80?e[t].classList.add("enter"):e[t].classList.contains("enter")&&!e[t].classList.contains("once")&&(e[t].getBoundingClientRect().top-window.innerHeight>80&&e[t].getBoundingClientRect().bottom>80||e[t].getBoundingClientRect().top-window.innerHeight<80&&e[t].getBoundingClientRect().bottom<80)&&e[t].classList.remove("enter")}let t=$(this),n=$("header");t.scrollTop()>120?n.addClass("header_bg"):n.removeClass("header_bg");let s,o=document.documentElement,i=window,l=i.scrollY||o.scrollTop,r=0,c=0,a=document.querySelector("header"),d=function(e,t){2===e&&t>52?(a.classList.add("hide"),c=e):1===e&&(a.classList.remove("hide"),c=e)};window.addEventListener("scroll",(function(){s=i.scrollY||o.scrollTop,s>l?r=2:s<l&&(r=1),r!==c&&d(r,s),l=s}))})),$(".faq .faq_item").on("click",(function(){$(this).toggleClass("opened")})),$(".btn-extra").on("click",(function(){$(this).toggleClass("opened")})),$(".faq_item").length>0&&document.querySelectorAll(".faq_item").forEach(e=>{e.querySelector(".faq_content_cover").style.setProperty("--el-height",e.querySelector(".faq_content").getBoundingClientRect().height+"px")}),$(".request_item .btn-extra").on("click",(function(){$(this).parentsUntil(".request_item").next().toggleClass("opened")})),$(".request_item .bottom .btn-extra").on("click",(function(){$(this).parentsUntil(".boootm").removeClass("opened"),$(this).parentsUntil(".request_item").parent().find(".btn-extra").removeClass("opened")})),$(".request_item").length>0&&document.querySelectorAll(".request_item").forEach(e=>{e.querySelector(".bottom").style.setProperty("--el-height",e.querySelector(".bottom .cover").getBoundingClientRect().height+"px")}),$(".swiper").length>0&&$.getScript("https://cdnjs.cloudflare.com/ajax/libs/Swiper/7.3.0/swiper-bundle.js",(function(){$(".swiper").each((function(){let e=$(this),t=e.find(".swiper-container");e.hasClass("article-slider")&&(swipes=new Swiper(t.prevObject[0],{speed:1500,slidesPerView:1,spaceBetween:20,autoHeight:!0,loop:!0,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:5e3},navigation:{nextEl:$(".article-slider_btns").find(".swiper-button-next")[0],prevEl:$(".article-slider_btns").find(".swiper-button-prev")[0]},pagination:{el:$(this).find(".swiper-pagination")[0]}})),e.hasClass("slider-blog")&&(swipes=new Swiper(t.prevObject[0],{speed:1500,slidesPerView:5,spaceBetween:30,centeredSlides:!0,loop:!0,navigation:{nextEl:$(".slider-blog_btns").find(".swiper-button-next")[0],prevEl:$(".slider-blog_btns").find(".swiper-button-prev")[0]},breakpoints:{0:{slidesPerView:1},550:{slidesPerView:2},850:{slidesPerView:3},1240:{slidesPerView:4,centeredSlides:!1},1380:{slidesPerView:5}}}),window.innerWidth<768&&swipes.destroy())}))})),$(".insert_section").length>0&&$.getScript("https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.js",(function(){$.getScript("https://cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0.0/jquery.counterup.min.js",(function(){$(".insert_section span").counterUp({delay:20,time:2e3})}))}))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJsZW5ndGgiLCJodG1sIiwiaSIsInRyaW0iLCJzcGxpdCIsImpvaW4iLCJzdmdMaW5lIiwic3ZnTGluZUxlbmd0aCIsIm9mZnNldCIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGwiLCJjaGlsZCIsImNvbnNvbGUiLCJsb2ciLCJnZXRUb3RhbExlbmd0aCIsInN0eWxlIiwic3Ryb2tlRGFzaGFycmF5Iiwic3Ryb2tlRGFzaG9mZnNldCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzY3JvbGxwZXJjZW50IiwiYm9keSIsInNjcm9sbFRvcCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbEhlaWdodCIsImNsaWVudEhlaWdodCIsImRyYXciLCJidG5zIiwicXVlcnlTZWxlY3RvckFsbCIsImJ0biIsImUiLCJsZWZ0IiwidG9wIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJzY3JlZW5YIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJ5Iiwic2V0UHJvcGVydHkiLCJhZGQiLCJ0cmFuc2Zvcm0iLCJyZW1vdmUiLCJjdXJzb3Jpbm5lciIsInF1ZXJ5U2VsZWN0b3IiLCJ4IiwiY2xpZW50WCIsImNsaWVudFkiLCJlbGVtZW50IiwiZGlzcGxheSIsInJhdGluZyIsInRvdGFsQ29zdCIsImlubmVySFRNTCIsInJlcGxhY2UiLCJwZXJjZW50IiwiZ2V0U2NyaXB0IiwiU21vb3RoU2Nyb2xsIiwia2V5Ym9hcmRTdXBwb3J0IiwiYW5pbWF0aW9uVGltZSIsInN0ZXBTaXplIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwidmFsdWUiLCJvbiIsInRoaXMiLCJ0b2dnbGVDbGFzcyIsInNjcm9sbEVsZW0iLCJpbmRleCIsImlubmVySGVpZ2h0IiwiYm90dG9tIiwiJHRoaXMiLCIkaGVhZCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJjdXJTY3JvbGwiLCJkb2MiLCJ3IiwicHJldlNjcm9sbCIsInNjcm9sbFkiLCJkaXJlY3Rpb24iLCJwcmV2RGlyZWN0aW9uIiwiaGVhZGVyIiwidG9nZ2xlSGVhZGVyIiwiaGVpZ2h0IiwicGFyZW50c1VudGlsIiwibmV4dCIsInBhcmVudCIsImZpbmQiLCJlYWNoIiwiX3RoaXMiLCJjb250YWluZXIiLCJoYXNDbGFzcyIsInN3aXBlcyIsIlN3aXBlciIsInByZXZPYmplY3QiLCJzcGVlZCIsInNsaWRlc1BlclZpZXciLCJzcGFjZUJldHdlZW4iLCJhdXRvSGVpZ2h0IiwibG9vcCIsImVmZmVjdCIsImZhZGVFZmZlY3QiLCJjcm9zc0ZhZGUiLCJhdXRvcGxheSIsImRlbGF5IiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsInBhZ2luYXRpb24iLCJlbCIsImNlbnRlcmVkU2xpZGVzIiwiYnJlYWtwb2ludHMiLCIwIiwiNTUwIiwiODUwIiwiMTI0MCIsIjEzODAiLCJpbm5lcldpZHRoIiwiZGVzdHJveSIsImNvdW50ZXJVcCIsInRpbWUiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxVQUFVQyxPQUFNLFdBU2QsR0FQR0YsRUFBRSxtQkFBbUJHLE9BQVMsR0FDN0JILEVBQUUscUJBQXFCSSxNQUFLLFNBQVVDLEVBQUdELEdBRXJDLE1BQU8sU0FES0osRUFBRU0sS0FBS0YsR0FBTUcsTUFBTSxJQUNQQyxLQUFLLGlCQUFtQixhQUlyRFIsRUFBRSxtQkFBbUJHLE9BQVMsRUFBRSxDQUMvQixJQUFJTSxFQUFTQyxFQUFlQyxFQUFTLEVBQ3JDQyxNQUFNQyxVQUFVQyxRQUFRQyxLQUFLZixFQUFFLG1CQUFvQmdCLElBQzVDaEIsRUFBRSxlQUFlRyxPQUFTLElBQ3pCUSxFQUFTLEdBRWJNLFFBQVFDLElBQUlGLEVBQU8sU0FDbkJQLEVBQVVPLEVBQ1ZOLEVBQWdCTSxFQUFNRyxpQkFDdEJILEVBQU1JLE1BQU1DLGdCQUFrQlgsRUFDOUJNLEVBQU1JLE1BQU1FLGlCQUFtQlosRUFDL0JhLE9BQU9DLGlCQUFpQixVQUV4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T0FBTzBCLGlCQU94QjVILEVBQUUsbUJBQW1CRyxPQUFTLEdBQzdCSCxFQUFFNEQsVUFBVSw4RUFBOEUsV0FDckY1RCxFQUFFNEQsVUFBVSxtRkFBbUYsV0FDNUY1RCxFQUFFLHdCQUF3QjZILFVBQVUsQ0FDaENmLE1BQU8sR0FDUGdCLEtBQU0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGlmKCQoXCIuYW5pbWF0ZWRfdGl0bGVcIikubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgJCgnLmFuaW1hdGVkX3RpdGxlIHAnKS5odG1sKGZ1bmN0aW9uIChpLCBodG1sKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGFycyA9ICQudHJpbShodG1sKS5zcGxpdChcIlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuICc8c3Bhbj4nICsgY2hhcnMuam9pbignPC9zcGFuPjxzcGFuPicpICsgJzwvc3Bhbj4nO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCQoXCIuc2Nyb2xsaW5nLXBhdGhcIikubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgbGV0IHN2Z0xpbmUsIHN2Z0xpbmVMZW5ndGgsIG9mZnNldCA9IDI7XHJcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCgkKFwiLnNjcm9sbGluZy1wYXRoXCIpLCBjaGlsZCA9PiB7XHJcbiAgICAgICAgICAgIGlmKCQoXCIuZnJvbnQtcGFnZVwiKS5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IDc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQsICdjaGlsZCcpXHJcbiAgICAgICAgICAgIHN2Z0xpbmUgPSBjaGlsZDtcclxuICAgICAgICAgICAgc3ZnTGluZUxlbmd0aCA9IGNoaWxkLmdldFRvdGFsTGVuZ3RoKCk7XHJcbiAgICAgICAgICAgIGNoaWxkLnN0eWxlLnN0cm9rZURhc2hhcnJheSA9IHN2Z0xpbmVMZW5ndGg7XHJcbiAgICAgICAgICAgIGNoaWxkLnN0eWxlLnN0cm9rZURhc2hvZmZzZXQgPSBzdmdMaW5lTGVuZ3RoO1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBzY3JvbGxTVkcpO1xyXG4gICAgICAgICAgICAvLyB2YXIgbGFzdFNjcm9sbHBlcmNlbnQgPSAwO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBzY3JvbGxTVkcoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xscGVyY2VudCA9ICgoZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSAvIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkpICogb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBpZiAoc2Nyb2xscGVyY2VudCA8IGxhc3RTY3JvbGxwZXJjZW50KSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAvLyBsYXN0U2Nyb2xscGVyY2VudCA9IHNjcm9sbHBlcmNlbnQ7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciBkcmF3ID0gc3ZnTGluZUxlbmd0aCAqIHNjcm9sbHBlcmNlbnQ7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5zdHlsZS5zdHJva2VEYXNob2Zmc2V0ID0gc3ZnTGluZUxlbmd0aCAtIGRyYXc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gXHJcblxyXG4gICAgaWYoJChcIi5idG5cIikubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgY29uc3QgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnRuLCAuc3dpcGVyLWJ1dHRvbi1wcmV2LCAuc3dpcGVyLWJ1dHRvbi1uZXh0LCAuc29jaWFsIHN2Z1wiKTtcclxuXHJcbiAgICAgICAgYnRucy5mb3JFYWNoKChidG4pID0+IHtcclxuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGVmdCwgdG9wO1xyXG4gICAgICAgICAgICAgICAgaWYoYnRuLmNsYXNzTGlzdC5jb250YWlucygnYnRuLXNlY29uZGFyeScpIHx8IGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ2J0bi1wcmltYXJ5Jykpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSAoZS5zY3JlZW5YIC0gYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSAoYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC8gMiAtIDUwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gKCBlLnkgLSBidG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gMTUuNSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IChlLnNjcmVlblggLSBidG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIDE1LjUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcCA9ICggZS55IC0gYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIDE1LjUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnRuLnN0eWxlLnNldFByb3BlcnR5KFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoJHtsZWZ0fXB4LCAke3RvcH1weClgKTtcclxuICAgICAgICAgICAgICAgIGlmKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1idXR0b24tcHJldicpIHx8IGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1idXR0b24tbmV4dCcpKXtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcInNjYWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1sZWZ0LXgnLCBsZWZ0IC0gNS41ICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuc2V0UHJvcGVydHkoJy0tdG9wLXknLCB0b3AgLSA1LjUgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYnRucy5mb3JFYWNoKChidG4pID0+IHtcclxuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZSgwcHgsIDBweClcIjtcclxuICAgICAgICAgICAgICAgIGlmKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1idXR0b24tcHJldicpIHx8IGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1idXR0b24tbmV4dCcpKXtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcInNjYWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1sZWZ0LXgnLCBidG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKiAtMSArIFwicHhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLnNldFByb3BlcnR5KCctLXRvcC15JywgIGJ0bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAqIC0xICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGN1cnNvcmlubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1cnNvcicpO1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGNvbnN0IHggPSBlLmNsaWVudFg7XHJcbiAgICAgICAgY29uc3QgeSA9IGUuY2xpZW50WTtcclxuICAgICAgICBjdXJzb3Jpbm5lci5zdHlsZS5sZWZ0ID0geCArICdweCc7XHJcbiAgICAgICAgY3Vyc29yaW5uZXIuc3R5bGUudG9wID0geSArICdweCc7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZigkKFwiLnN3aXBlci1zbGlkZVwiKS5sZW5ndGggPiAwKXtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXNsaWRlJykuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGN1cnNvcmlubmVyLnN0eWxlLmRpc3BsYXkgPSBgbm9uZWA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGN1cnNvcmlubmVyLnN0eWxlLmRpc3BsYXkgPSBgYmxvY2tgO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZigkKFwiLnJhdGluZ1wiKS5sZW5ndGggPiAwKXtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmF0aW5nJykuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmF0aW5nID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JvdXAnKTtcclxuICAgICAgICAgICAgY29uc3QgdG90YWxDb3N0ID0gcmF0aW5nLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW4nKVsxXS5pbm5lckhUTUwucmVwbGFjZSgvW14wLTldL2csJycpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29zdCA9IHJhdGluZy5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuJylbMF0uaW5uZXJIVE1MLnJlcGxhY2UoL1teMC05XS9nLCcnKTtcclxuICAgICAgICAgICAgY29uc3QgcGVyY2VudCA9IGN1cnJlbnRDb3N0IC8gdG90YWxDb3N0ICogMTAwO1xyXG4gICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saW5lIHNwYW4nKS5zdHlsZSA9IGB3aWR0aDogJHtwZXJjZW50fSVgXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJC5nZXRTY3JpcHQoXCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9zbW9vdGhzY3JvbGwvMS40LjkvU21vb3RoU2Nyb2xsLmpzXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgU21vb3RoU2Nyb2xsKHtcclxuICAgICAgICAgICAga2V5Ym9hcmRTdXBwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICBhbmltYXRpb25UaW1lOiAxMDAwLFxyXG4gICAgICAgICAgICBzdGVwU2l6ZTogNjAsIC8vIFtweF1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmKCQoXCJpbnB1dCwgdGV4dGFyZWFcIikubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsIHRleHRhcmVhJykuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBldmVudC50YXJnZXQuY2xvc2VzdCgnZmllbGRzZXQnKS5jbGFzc0xpc3QuYWRkKCdmb2N1c2VkJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKCBldmVudC50YXJnZXQudmFsdWUubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuY2xvc2VzdCgnZmllbGRzZXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1c2VkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICQoJy5idXJnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgICAgICQoJ2hlYWRlcicpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgIC8vIHNjcm9sbCBjbGFzc3Nlc1xyXG4gICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zY3JvbGwteScpLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICBjb25zdCBzY3JvbGxFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNjcm9sbC15Jyk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzY3JvbGxFbGVtLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICFzY3JvbGxFbGVtW2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoJ2VudGVyJylcclxuICAgICAgICAgICAgICAgICAgICAmJiBzY3JvbGxFbGVtW2luZGV4XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSB3aW5kb3cuaW5uZXJIZWlnaHQgPCA4MFxyXG4gICAgICAgICAgICAgICAgICAgICYmIHNjcm9sbEVsZW1baW5kZXhdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA+IDgwXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxFbGVtW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdlbnRlcicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxFbGVtW2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoJ2VudGVyJylcclxuICAgICAgICAgICAgICAgICAgICAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFzY3JvbGxFbGVtW2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoJ29uY2UnKVxyXG4gICAgICAgICAgICAgICAgICAgICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2Nyb2xsRWxlbVtpbmRleF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gd2luZG93LmlubmVySGVpZ2h0ID4gODBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHNjcm9sbEVsZW1baW5kZXhdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA+IDgwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2Nyb2xsRWxlbVtpbmRleF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gd2luZG93LmlubmVySGVpZ2h0IDwgODBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHNjcm9sbEVsZW1baW5kZXhdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA8IDgwKSlcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEVsZW1baW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoJ2VudGVyJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGhlYWRlciBzY3JvbGxpbmdcclxuICAgICAgICBsZXQgJHRoaXMgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAkaGVhZCA9ICQoJ2hlYWRlcicpO1xyXG4gICAgICAgIGlmICgkdGhpcy5zY3JvbGxUb3AoKSA+IDEyMCkge1xyXG4gICAgICAgICAgICAkaGVhZC5hZGRDbGFzcygnaGVhZGVyX2JnJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGhlYWQucmVtb3ZlQ2xhc3MoJ2hlYWRlcl9iZycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaGlkZGVuIGhlYWRlclxyXG4gICAgICAgIGxldCBkb2MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IHcgPSB3aW5kb3c7XHJcblxyXG4gICAgICAgIGxldCBwcmV2U2Nyb2xsID0gdy5zY3JvbGxZIHx8IGRvYy5zY3JvbGxUb3A7XHJcbiAgICAgICAgbGV0IGN1clNjcm9sbDtcclxuICAgICAgICBsZXQgZGlyZWN0aW9uID0gMDtcclxuICAgICAgICBsZXQgcHJldkRpcmVjdGlvbiA9IDA7XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKTtcclxuXHJcbiAgICAgICAgbGV0IGNoZWNrU2Nyb2xsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGN1clNjcm9sbCA9IHcuc2Nyb2xsWSB8fCBkb2Muc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICBpZiAoY3VyU2Nyb2xsID4gcHJldlNjcm9sbCkgeyBcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY3VyU2Nyb2xsIDwgcHJldlNjcm9sbCkgeyBcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiAhPT0gcHJldkRpcmVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlSGVhZGVyKGRpcmVjdGlvbiwgY3VyU2Nyb2xsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcmV2U2Nyb2xsID0gY3VyU2Nyb2xsO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCB0b2dnbGVIZWFkZXIgPSBmdW5jdGlvbihkaXJlY3Rpb24sIGN1clNjcm9sbCkge1xyXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAyICYmIGN1clNjcm9sbCA+IDUyKSB7IFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIHByZXZEaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgcHJldkRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjaGVja1Njcm9sbCk7XHJcblxyXG4gICAgfSlcclxuXHJcbiAgICAvL0ZBUVxyXG5cclxuICAgICQoJy5mYXEgLmZhcV9pdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5idG4tZXh0cmEnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYoJChcIi5mYXFfaXRlbVwiKS5sZW5ndGggPiAwKXtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmFxX2l0ZW0nKS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYXFfY29udGVudF9jb3ZlcicpLnN0eWxlLnNldFByb3BlcnR5KCctLWVsLWhlaWdodCcsIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZhcV9jb250ZW50JykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgJ3B4Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJCgnLnJlcXVlc3RfaXRlbSAuYnRuLWV4dHJhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHNVbnRpbCgnLnJlcXVlc3RfaXRlbScpLm5leHQoKS50b2dnbGVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucmVxdWVzdF9pdGVtIC5ib3R0b20gLmJ0bi1leHRyYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzVW50aWwoJy5ib29vdG0nKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzVW50aWwoJy5yZXF1ZXN0X2l0ZW0nKS5wYXJlbnQoKS5maW5kKCcuYnRuLWV4dHJhJykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYoJChcIi5yZXF1ZXN0X2l0ZW1cIikubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlcXVlc3RfaXRlbScpLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmJvdHRvbScpLnN0eWxlLnNldFByb3BlcnR5KCctLWVsLWhlaWdodCcsIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmJvdHRvbSAuY292ZXInKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyAncHgnKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzbGlkZXJzXHJcbiAgICBpZigkKFwiLnN3aXBlclwiKS5sZW5ndGggPiAwKXtcclxuICAgICAgICAkLmdldFNjcmlwdChcImh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL1N3aXBlci83LjMuMC9zd2lwZXItYnVuZGxlLmpzXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoXCIuc3dpcGVyXCIpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3dpcGVyO1xyXG4gICAgICAgICAgICAgICAgbGV0IF90aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBfdGhpcy5maW5kKFwiLnN3aXBlci1jb250YWluZXJcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGFzQ2xhc3MoXCJhcnRpY2xlLXNsaWRlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXBlcyA9IG5ldyBTd2lwZXIoY29udGFpbmVyLnByZXZPYmplY3RbMF0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDE1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9IZWlnaHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdDogJ2ZhZGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWRlRWZmZWN0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcm9zc0ZhZGU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiA1MDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0RWw6ICQoJy5hcnRpY2xlLXNsaWRlcl9idG5zJykuZmluZChcIi5zd2lwZXItYnV0dG9uLW5leHRcIilbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2RWw6ICQoJy5hcnRpY2xlLXNsaWRlcl9idG5zJykuZmluZChcIi5zd2lwZXItYnV0dG9uLXByZXZcIilbMF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWw6ICQodGhpcykuZmluZChcIi5zd2lwZXItcGFnaW5hdGlvblwiKVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oYXNDbGFzcyhcInNsaWRlci1ibG9nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVzID0gbmV3IFN3aXBlcihjb250YWluZXIucHJldk9iamVjdFswXSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGVlZDogMTUwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzo1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsOiAkKCcuc2xpZGVyLWJsb2dfYnRucycpLmZpbmQoXCIuc3dpcGVyLWJ1dHRvbi1uZXh0XCIpWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldkVsOiAkKCcuc2xpZGVyLWJsb2dfYnRucycpLmZpbmQoXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIpWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA1NTA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDg1MDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTI0MDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEzODA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA1LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCQoXCIuaW5zZXJ0X3NlY3Rpb25cIikubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgJC5nZXRTY3JpcHQoXCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy93YXlwb2ludHMvNC4wLjEvanF1ZXJ5LndheXBvaW50cy5qc1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgJC5nZXRTY3JpcHQoXCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9Db3VudGVyLVVwLzEuMC4wL2pxdWVyeS5jb3VudGVydXAubWluLmpzXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkKCcuaW5zZXJ0X3NlY3Rpb24gc3BhbicpLmNvdW50ZXJVcCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IDIwMDBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgIFxyXG4gICAgfVxyXG5cclxufSk7XHJcbiJdfQ==
