$(document).ready((function(){if($(".animated_title").length>0&&$(".animated_title p").html((function(e,t){return"<span>"+$.trim(t).split("").join("</span><span>")+"</span>"})),$(".scrolling-path").length>0){let e,t;Array.prototype.forEach.call($(".scrolling-path"),n=>{e=n,t=e.getTotalLength(),e.style.strokeDasharray=t,e.style.strokeDashoffset=t,window.addEventListener("scroll",(function(){var n=(document.body.scrollTop+document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*4,s=t*n;e.style.strokeDashoffset=t-s}))})}if($(".btn").length>0){const e=document.querySelectorAll(".btn, .swiper-button-prev, .swiper-button-next, .social svg");e.forEach(e=>{e.addEventListener("mousemove",(function(t){let n,s;e.classList.contains("btn btn-secondary")||e.classList.contains("btn btn-primary")?(n=t.screenX-e.getBoundingClientRect().left-(e.getBoundingClientRect().width/2-50),console.log(n,t.screenX,e.getBoundingClientRect().left),s=t.y-e.getBoundingClientRect().top-15.5):(n=t.screenX-e.getBoundingClientRect().left-15.5,s=t.y-e.getBoundingClientRect().top-15.5),e.style.setProperty("transform",`translate(${n}px, ${s}px)`),(e.classList.contains("swiper-button-prev")||e.classList.contains("swiper-button-next"))&&(e.classList.add("scale"),e.style.setProperty("--left-x",n-5.5+"px"),e.style.setProperty("--top-y",s-5.5+"px"))}))}),e.forEach(e=>{e.addEventListener("mouseout",(function(t){e.style.transform="translate(0px, 0px)",(e.classList.contains("swiper-button-prev")||e.classList.contains("swiper-button-next"))&&(e.classList.remove("scale"),e.style.setProperty("--left-x",-1*e.getBoundingClientRect().width+"px"),e.style.setProperty("--top-y",-1*e.getBoundingClientRect().width+"px"))}))})}const e=document.querySelector(".cursor");document.addEventListener("mousemove",(function(t){const n=t.clientX,s=t.clientY;e.style.left=n+"px",e.style.top=s+"px"})),$(".swiper-slide").length>0&&document.querySelectorAll(".swiper-slide").forEach(t=>{t.addEventListener("mousemove",(function(t){e.style.display="none"})),t.addEventListener("mouseleave",(function(t){e.style.display="block"}))}),$(".rating").length>0&&document.querySelectorAll(".rating").forEach(e=>{const t=e.querySelector(".group"),n=t.querySelectorAll("span")[1].innerHTML.replace(/[^0-9]/g,""),s=t.querySelectorAll("span")[0].innerHTML.replace(/[^0-9]/g,"")/n*100;e.querySelector(".line span").style=`width: ${s}%`}),$.getScript("https://cdnjs.cloudflare.com/ajax/libs/smoothscroll/1.4.9/SmoothScroll.js",(function(){SmoothScroll({keyboardSupport:!0,animationTime:1e3,stepSize:120})})),$("input, textarea").length>0&&document.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("focus",e=>{e.target.closest("fieldset").classList.add("focused")}),e.addEventListener("blur",e=>{0===e.target.value.length&&e.target.closest("fieldset").classList.remove("focused")})}),$(".burger").on("click",(function(){$(this).toggleClass("opened"),$("header").toggleClass("opened")})),window.addEventListener("scroll",(function(e){if(document.querySelectorAll(".scroll-y").length>0){const e=document.querySelectorAll(".scroll-y");for(let t=0;t<e.length;t++)!e[t].classList.contains("enter")&&e[t].getBoundingClientRect().top-window.innerHeight<80&&e[t].getBoundingClientRect().bottom>80?e[t].classList.add("enter"):e[t].classList.contains("enter")&&!e[t].classList.contains("once")&&(e[t].getBoundingClientRect().top-window.innerHeight>80&&e[t].getBoundingClientRect().bottom>80||e[t].getBoundingClientRect().top-window.innerHeight<80&&e[t].getBoundingClientRect().bottom<80)&&e[t].classList.remove("enter")}let t=$(this),n=$("header");t.scrollTop()>120?n.addClass("header_bg"):n.removeClass("header_bg");let s,o=document.documentElement,i=window,l=i.scrollY||o.scrollTop,r=0,c=0,a=document.querySelector("header"),d=function(e,t){2===e&&t>52?(a.classList.add("hide"),c=e):1===e&&(a.classList.remove("hide"),c=e)};window.addEventListener("scroll",(function(){s=i.scrollY||o.scrollTop,s>l?r=2:s<l&&(r=1),r!==c&&d(r,s),l=s}))})),$(".faq .faq_item").on("click",(function(){$(this).toggleClass("opened")})),$(".btn-extra").on("click",(function(){$(this).toggleClass("opened")})),$(".faq_item").length>0&&document.querySelectorAll(".faq_item").forEach(e=>{e.querySelector(".faq_content_cover").style.setProperty("--el-height",e.querySelector(".faq_content").getBoundingClientRect().height+"px")}),$(".request_item .btn-extra").on("click",(function(){$(this).parentsUntil(".request_item").next().toggleClass("opened")})),$(".request_item .bottom .btn-extra").on("click",(function(){$(this).parentsUntil(".boootm").removeClass("opened"),$(this).parentsUntil(".request_item").parent().find(".btn-extra").removeClass("opened")})),$(".request_item").length>0&&document.querySelectorAll(".request_item").forEach(e=>{e.querySelector(".bottom").style.setProperty("--el-height",e.querySelector(".bottom .cover").getBoundingClientRect().height+"px")}),$(".swiper").length>0&&$.getScript("https://cdnjs.cloudflare.com/ajax/libs/Swiper/7.3.0/swiper-bundle.js",(function(){$(".swiper").each((function(){let e=$(this),t=e.find(".swiper-container");e.hasClass("article-slider")&&(swipes=new Swiper(t.prevObject[0],{speed:1500,slidesPerView:1,spaceBetween:20,autoHeight:!0,loop:!0,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:5e3},navigation:{nextEl:$(".article-slider_btns").find(".swiper-button-next")[0],prevEl:$(".article-slider_btns").find(".swiper-button-prev")[0]},pagination:{el:$(this).find(".swiper-pagination")[0]}})),e.hasClass("slider-blog")&&(console.log($(".slider-blog_btns").find(".swiper-button-next")),swipes=new Swiper(t.prevObject[0],{speed:1500,slidesPerView:5,spaceBetween:30,centeredSlides:!0,loop:!0,navigation:{nextEl:$(".slider-blog_btns").find(".swiper-button-next")[0],prevEl:$(".slider-blog_btns").find(".swiper-button-prev")[0]},breakpoints:{0:{slidesPerView:1},550:{slidesPerView:2},850:{slidesPerView:3},1240:{slidesPerView:4,centeredSlides:!1},1380:{slidesPerView:5}}}),window.innerWidth<768&&swipes.destroy())}))})),$(".insert_section").length>0&&$.getScript("https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.js",(function(){$.getScript("https://cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0.0/jquery.counterup.min.js",(function(){$(".insert_section span").counterUp({delay:20,time:2e3})}))}))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJsZW5ndGgiLCJodG1sIiwiaSIsInRyaW0iLCJzcGxpdCIsImpvaW4iLCJzdmdMaW5lIiwic3ZnTGluZUxlbmd0aCIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGwiLCJjaGlsZCIsImdldFRvdGFsTGVuZ3RoIiwic3R5bGUiLCJzdHJva2VEYXNoYXJyYXkiLCJzdHJva2VEYXNob2Zmc2V0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNjcm9sbHBlcmNlbnQiLCJib2R5Iiwic2Nyb2xsVG9wIiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiZHJhdyIsImJ0bnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnRuIiwiZSIsImxlZnQiLCJ0b3AiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNjcmVlblgiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsImNvbnNvbGUiLCJsb2ciLCJ5Iiwic2V0UHJvcGVydHkiLCJhZGQiLCJ0cmFuc2Zvcm0iLCJyZW1vdmUiLCJjdXJzb3Jpbm5lciIsInF1ZXJ5U2VsZWN0b3IiLCJ4IiwiY2xpZW50WCIsImNsaWVudFkiLCJlbGVtZW50IiwiZGlzcGxheSIsInJhdGluZyIsInRvdGFsQ29zdCIsImlubmVySFRNTCIsInJlcGxhY2UiLCJwZXJjZW50IiwiZ2V0U2NyaXB0IiwiU21vb3RoU2Nyb2xsIiwia2V5Ym9hcmRTdXBwb3J0IiwiYW5pbWF0aW9uVGltZSIsInN0ZXBTaXplIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwidmFsdWUiLCJvbiIsInRoaXMiLCJ0b2dnbGVDbGFzcyIsInNjcm9sbEVsZW0iLCJpbmRleCIsImlubmVySGVpZ2h0IiwiYm90dG9tIiwiJHRoaXMiLCIkaGVhZCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJjdXJTY3JvbGwiLCJkb2MiLCJ3IiwicHJldlNjcm9sbCIsInNjcm9sbFkiLCJkaXJlY3Rpb24iLCJwcmV2RGlyZWN0aW9uIiwiaGVhZGVyIiwidG9nZ2xlSGVhZGVyIiwiaGVpZ2h0IiwicGFyZW50c1VudGlsIiwibmV4dCIsInBhcmVudCIsImZpbmQiLCJlYWNoIiwiX3RoaXMiLCJjb250YWluZXIiLCJoYXNDbGFzcyIsInN3aXBlcyIsIlN3aXBlciIsInByZXZPYmplY3QiLCJzcGVlZCIsInNsaWRlc1BlclZpZXciLCJzcGFjZUJldHdlZW4iLCJhdXRvSGVpZ2h0IiwibG9vcCIsImVmZmVjdCIsImZhZGVFZmZlY3QiLCJjcm9zc0ZhZGUiLCJhdXRvcGxheSIsImRlbGF5IiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsInBhZ2luYXRpb24iLCJlbCIsImNlbnRlcmVkU2xpZGVzIiwiYnJlYWtwb2ludHMiLCIwIiwiNTUwIiwiODUwIiwiMTI0MCIsIjEzODAiLCJpbm5lcldpZHRoIiwiZGVzdHJveSIsImNvdW50ZXJVcCIsInRpbWUiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxVQUFVQyxPQUFNLFdBU2QsR0FQR0YsRUFBRSxtQkFBbUJHLE9BQVMsR0FDN0JILEVBQUUscUJBQXFCSSxNQUFLLFNBQVVDLEVBQUdELEdBRXJDLE1BQU8sU0FES0osRUFBRU0sS0FBS0YsR0FBTUcsTUFBTSxJQUNQQyxLQUFLLGlCQUFtQixhQUlyRFIsRUFBRSxtQkFBbUJHLE9BQVMsRUFBRSxDQUMvQixJQUFJTSxFQUFTQyxFQUNiQyxNQUFNQyxVQUFVQyxRQUFRQyxLQUFLZCxFQUFFLG1CQUFvQmUsSUFDL0NOLEVBQVVNLEVBQ1ZMLEVBQWdCRCxFQUFRTyxpQkFDeEJQLEVBQVFRLE1BQU1DLGdCQUFrQlIsRUFDaENELEVBQVFRLE1BQU1FLGlCQUFtQlQsRUFDakNVLE9BQU9DLGlCQUFpQixVQUN4QixXQUNJLElBQUlDLEdBQWtCckIsU0FBU3NCLEtBQUtDLFVBQVl2QixTQUFTd0IsZ0JBQWdCRCxZQUFjdkIsU0FBU3dCLGdCQUFnQkMsYUFB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QWEsS0FDbkJ6QixPQUFPMEIsaUJBT3hCM0gsRUFBRSxtQkFBbUJHLE9BQVMsR0FDN0JILEVBQUUyRCxVQUFVLDhFQUE4RSxXQUNyRjNELEVBQUUyRCxVQUFVLG1GQUFtRixXQUM1RjNELEVBQUUsd0JBQXdCNEgsVUFBVSxDQUNoQ2YsTUFBTyxHQUNQZ0IsS0FBTSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgaWYoJChcIi5hbmltYXRlZF90aXRsZVwiKS5sZW5ndGggPiAwKXtcclxuICAgICAgICAkKCcuYW5pbWF0ZWRfdGl0bGUgcCcpLmh0bWwoZnVuY3Rpb24gKGksIGh0bWwpIHtcclxuICAgICAgICAgICAgdmFyIGNoYXJzID0gJC50cmltKGh0bWwpLnNwbGl0KFwiXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gJzxzcGFuPicgKyBjaGFycy5qb2luKCc8L3NwYW4+PHNwYW4+JykgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoJChcIi5zY3JvbGxpbmctcGF0aFwiKS5sZW5ndGggPiAwKXtcclxuICAgICAgICBsZXQgc3ZnTGluZSwgc3ZnTGluZUxlbmd0aDtcclxuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKCQoXCIuc2Nyb2xsaW5nLXBhdGhcIiksIGNoaWxkID0+IHtcclxuICAgICAgICAgICAgc3ZnTGluZSA9IGNoaWxkO1xyXG4gICAgICAgICAgICBzdmdMaW5lTGVuZ3RoID0gc3ZnTGluZS5nZXRUb3RhbExlbmd0aCgpO1xyXG4gICAgICAgICAgICBzdmdMaW5lLnN0eWxlLnN0cm9rZURhc2hhcnJheSA9IHN2Z0xpbmVMZW5ndGg7XHJcbiAgICAgICAgICAgIHN2Z0xpbmUuc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IHN2Z0xpbmVMZW5ndGg7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHNjcm9sbFNWRyk7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNjcm9sbFNWRygpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxwZXJjZW50ID0gKChkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApIC8gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSkgKiA0O1xyXG4gICAgICAgICAgICAgICAgdmFyIGRyYXcgPSBzdmdMaW5lTGVuZ3RoICogc2Nyb2xscGVyY2VudDtcclxuICAgICAgICAgICAgICAgIHN2Z0xpbmUuc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IHN2Z0xpbmVMZW5ndGggLSBkcmF3O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IFxyXG5cclxuICAgIGlmKCQoXCIuYnRuXCIpLmxlbmd0aCA+IDApe1xyXG4gICAgICAgIGNvbnN0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ0biwgLnN3aXBlci1idXR0b24tcHJldiwgLnN3aXBlci1idXR0b24tbmV4dCwgLnNvY2lhbCBzdmdcIik7XHJcblxyXG4gICAgICAgIGJ0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcbiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGxlZnQsIHRvcDtcclxuICAgICAgICAgICAgICAgIGlmKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ2J0bi1zZWNvbmRhcnknKSB8fCBidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdidG4tcHJpbWFyeScpKXtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gKGUuc2NyZWVuWCAtIGJ0bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0gKGJ0bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAvIDIgLSA1MCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxlZnQsIGUuc2NyZWVuWCwgYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQpXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gKCBlLnkgLSBidG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gMTUuNSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IChlLnNjcmVlblggLSBidG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIDE1LjUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcCA9ICggZS55IC0gYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIDE1LjUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnRuLnN0eWxlLnNldFByb3BlcnR5KFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoJHtsZWZ0fXB4LCAke3RvcH1weClgKTtcclxuICAgICAgICAgICAgICAgIGlmKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1idXR0b24tcHJldicpIHx8IGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1idXR0b24tbmV4dCcpKXtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcInNjYWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1sZWZ0LXgnLCBsZWZ0IC0gNS41ICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuc2V0UHJvcGVydHkoJy0tdG9wLXknLCB0b3AgLSA1LjUgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYnRucy5mb3JFYWNoKChidG4pID0+IHtcclxuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZSgwcHgsIDBweClcIjtcclxuICAgICAgICAgICAgICAgIGlmKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1idXR0b24tcHJldicpIHx8IGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1idXR0b24tbmV4dCcpKXtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcInNjYWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1sZWZ0LXgnLCBidG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKiAtMSArIFwicHhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLnNldFByb3BlcnR5KCctLXRvcC15JywgIGJ0bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAqIC0xICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGN1cnNvcmlubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1cnNvcicpO1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGNvbnN0IHggPSBlLmNsaWVudFg7XHJcbiAgICAgICAgY29uc3QgeSA9IGUuY2xpZW50WTtcclxuICAgICAgICBjdXJzb3Jpbm5lci5zdHlsZS5sZWZ0ID0geCArICdweCc7XHJcbiAgICAgICAgY3Vyc29yaW5uZXIuc3R5bGUudG9wID0geSArICdweCc7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZigkKFwiLnN3aXBlci1zbGlkZVwiKS5sZW5ndGggPiAwKXtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXNsaWRlJykuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGN1cnNvcmlubmVyLnN0eWxlLmRpc3BsYXkgPSBgbm9uZWA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGN1cnNvcmlubmVyLnN0eWxlLmRpc3BsYXkgPSBgYmxvY2tgO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZigkKFwiLnJhdGluZ1wiKS5sZW5ndGggPiAwKXtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmF0aW5nJykuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmF0aW5nID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JvdXAnKTtcclxuICAgICAgICAgICAgY29uc3QgdG90YWxDb3N0ID0gcmF0aW5nLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW4nKVsxXS5pbm5lckhUTUwucmVwbGFjZSgvW14wLTldL2csJycpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29zdCA9IHJhdGluZy5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuJylbMF0uaW5uZXJIVE1MLnJlcGxhY2UoL1teMC05XS9nLCcnKTtcclxuICAgICAgICAgICAgY29uc3QgcGVyY2VudCA9IGN1cnJlbnRDb3N0IC8gdG90YWxDb3N0ICogMTAwO1xyXG4gICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saW5lIHNwYW4nKS5zdHlsZSA9IGB3aWR0aDogJHtwZXJjZW50fSVgXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJC5nZXRTY3JpcHQoXCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9zbW9vdGhzY3JvbGwvMS40LjkvU21vb3RoU2Nyb2xsLmpzXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgU21vb3RoU2Nyb2xsKHtcclxuICAgICAgICAgICAga2V5Ym9hcmRTdXBwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICBhbmltYXRpb25UaW1lOiAxMDAwLFxyXG4gICAgICAgICAgICBzdGVwU2l6ZTogMTIwLCAvLyBbcHhdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZigkKFwiaW5wdXQsIHRleHRhcmVhXCIpLmxlbmd0aCA+IDApe1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LCB0ZXh0YXJlYScpLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2ZpZWxkc2V0JykuY2xhc3NMaXN0LmFkZCgnZm9jdXNlZCcpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiggZXZlbnQudGFyZ2V0LnZhbHVlLmxlbmd0aCA9PT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2ZpZWxkc2V0JykuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXNlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkKCcuYnVyZ2VyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcclxuICAgICAgICAkKCdoZWFkZXInKS50b2dnbGVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAvLyBzY3JvbGwgY2xhc3NzZXNcclxuICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2Nyb2xsLXknKS5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zY3JvbGwteScpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2Nyb2xsRWxlbS5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAhc2Nyb2xsRWxlbVtpbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgc2Nyb2xsRWxlbVtpbmRleF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gd2luZG93LmlubmVySGVpZ2h0IDwgODBcclxuICAgICAgICAgICAgICAgICAgICAmJiBzY3JvbGxFbGVtW2luZGV4XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPiA4MFxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRWxlbVtpbmRleF0uY2xhc3NMaXN0LmFkZCgnZW50ZXInKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRWxlbVtpbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgJiZcclxuICAgICAgICAgICAgICAgICAgICAhc2Nyb2xsRWxlbVtpbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdvbmNlJylcclxuICAgICAgICAgICAgICAgICAgICAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHNjcm9sbEVsZW1baW5kZXhdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIHdpbmRvdy5pbm5lckhlaWdodCA+IDgwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBzY3JvbGxFbGVtW2luZGV4XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPiA4MClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHNjcm9sbEVsZW1baW5kZXhdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIHdpbmRvdy5pbm5lckhlaWdodCA8IDgwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBzY3JvbGxFbGVtW2luZGV4XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPCA4MCkpXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxFbGVtW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdlbnRlcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBoZWFkZXIgc2Nyb2xsaW5nXHJcbiAgICAgICAgbGV0ICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgJGhlYWQgPSAkKCdoZWFkZXInKTtcclxuICAgICAgICBpZiAoJHRoaXMuc2Nyb2xsVG9wKCkgPiAxMjApIHtcclxuICAgICAgICAgICAgJGhlYWQuYWRkQ2xhc3MoJ2hlYWRlcl9iZycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRoZWFkLnJlbW92ZUNsYXNzKCdoZWFkZXJfYmcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGhpZGRlbiBoZWFkZXJcclxuICAgICAgICBsZXQgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgICAgIGxldCB3ID0gd2luZG93O1xyXG5cclxuICAgICAgICBsZXQgcHJldlNjcm9sbCA9IHcuc2Nyb2xsWSB8fCBkb2Muc2Nyb2xsVG9wO1xyXG4gICAgICAgIGxldCBjdXJTY3JvbGw7XHJcbiAgICAgICAgbGV0IGRpcmVjdGlvbiA9IDA7XHJcbiAgICAgICAgbGV0IHByZXZEaXJlY3Rpb24gPSAwO1xyXG5cclxuICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJyk7XHJcblxyXG4gICAgICAgIGxldCBjaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjdXJTY3JvbGwgPSB3LnNjcm9sbFkgfHwgZG9jLnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgaWYgKGN1clNjcm9sbCA+IHByZXZTY3JvbGwpIHsgXHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGN1clNjcm9sbCA8IHByZXZTY3JvbGwpIHsgXHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gIT09IHByZXZEaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZUhlYWRlcihkaXJlY3Rpb24sIGN1clNjcm9sbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJldlNjcm9sbCA9IGN1clNjcm9sbDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgdG9nZ2xlSGVhZGVyID0gZnVuY3Rpb24oZGlyZWN0aW9uLCBjdXJTY3JvbGwpIHtcclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gMiAmJiBjdXJTY3JvbGwgPiA1MikgeyBcclxuICAgICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICBwcmV2RGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIHByZXZEaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgY2hlY2tTY3JvbGwpO1xyXG5cclxuICAgIH0pXHJcblxyXG4gICAgLy9GQVFcclxuXHJcbiAgICAkKCcuZmFxIC5mYXFfaXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuYnRuLWV4dHJhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmKCQoXCIuZmFxX2l0ZW1cIikubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZhcV9pdGVtJykuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmFxX2NvbnRlbnRfY292ZXInKS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbC1oZWlnaHQnLCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYXFfY29udGVudCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCArICdweCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICQoJy5yZXF1ZXN0X2l0ZW0gLmJ0bi1leHRyYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzVW50aWwoJy5yZXF1ZXN0X2l0ZW0nKS5uZXh0KCkudG9nZ2xlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnJlcXVlc3RfaXRlbSAuYm90dG9tIC5idG4tZXh0cmEnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykucGFyZW50c1VudGlsKCcuYm9vb3RtJykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50c1VudGlsKCcucmVxdWVzdF9pdGVtJykucGFyZW50KCkuZmluZCgnLmJ0bi1leHRyYScpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmKCQoXCIucmVxdWVzdF9pdGVtXCIpLmxlbmd0aCA+IDApe1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXF1ZXN0X2l0ZW0nKS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib3R0b20nKS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbC1oZWlnaHQnLCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib3R0b20gLmNvdmVyJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgJ3B4Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2xpZGVyc1xyXG4gICAgaWYoJChcIi5zd2lwZXJcIikubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgJC5nZXRTY3JpcHQoXCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9Td2lwZXIvNy4zLjAvc3dpcGVyLWJ1bmRsZS5qc1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKFwiLnN3aXBlclwiKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN3aXBlcjtcclxuICAgICAgICAgICAgICAgIGxldCBfdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyID0gX3RoaXMuZmluZChcIi5zd2lwZXItY29udGFpbmVyXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmhhc0NsYXNzKFwiYXJ0aWNsZS1zbGlkZXJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2lwZXMgPSBuZXcgU3dpcGVyKGNvbnRhaW5lci5wcmV2T2JqZWN0WzBdLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkOiAxNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvSGVpZ2h0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6ICdmYWRlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFkZUVmZmVjdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Jvc3NGYWRlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheTogNTAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsOiAkKCcuYXJ0aWNsZS1zbGlkZXJfYnRucycpLmZpbmQoXCIuc3dpcGVyLWJ1dHRvbi1uZXh0XCIpWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldkVsOiAkKCcuYXJ0aWNsZS1zbGlkZXJfYnRucycpLmZpbmQoXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIpWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsOiAkKHRoaXMpLmZpbmQoXCIuc3dpcGVyLXBhZ2luYXRpb25cIilbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGFzQ2xhc3MoXCJzbGlkZXItYmxvZ1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJy5zbGlkZXItYmxvZ19idG5zJykuZmluZChcIi5zd2lwZXItYnV0dG9uLW5leHRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVzID0gbmV3IFN3aXBlcihjb250YWluZXIucHJldk9iamVjdFswXSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGVlZDogMTUwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzo1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsOiAkKCcuc2xpZGVyLWJsb2dfYnRucycpLmZpbmQoXCIuc3dpcGVyLWJ1dHRvbi1uZXh0XCIpWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldkVsOiAkKCcuc2xpZGVyLWJsb2dfYnRucycpLmZpbmQoXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIpWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA1NTA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDg1MDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTI0MDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEzODA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA1LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCQoXCIuaW5zZXJ0X3NlY3Rpb25cIikubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgJC5nZXRTY3JpcHQoXCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy93YXlwb2ludHMvNC4wLjEvanF1ZXJ5LndheXBvaW50cy5qc1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgJC5nZXRTY3JpcHQoXCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9Db3VudGVyLVVwLzEuMC4wL2pxdWVyeS5jb3VudGVydXAubWluLmpzXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkKCcuaW5zZXJ0X3NlY3Rpb24gc3BhbicpLmNvdW50ZXJVcCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IDIwMDBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgIFxyXG4gICAgfVxyXG5cclxufSk7XHJcbiJdfQ==
